"use strict";(self.webpackChunkhades_phone=self.webpackChunkhades_phone||[]).push([[165],{10165:(e,n,t)=>{t.r(n),t.d(n,{default:()=>_});var r=t(60897),a=t(29412),c=t(54637),o=t(90680),l=t(39314),i=t(24492),u=t(73842),s=t(33625),f=t(31373),p=t(14250),m=t(29699),d=t(31005),y=t(90418),v=t(53894),h=t(51734),E=t(59950),b=t(83271);function A(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function c(t,r,a,c){var i=r&&r.prototype instanceof l?r:l,u=Object.create(i.prototype);return g(u,"_invoke",function(t,r,a){var c,l,i,u=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return c=n,l=0,i=e,p.n=t,o}};function m(t,r){for(l=t,i=r,n=0;!f&&u&&!a&&n<s.length;n++){var a,c=s[n],m=p.p,d=c[2];t>3?(a=d===r)&&(i=c[(l=c[4])?5:(l=3,3)],c[4]=c[5]=e):c[0]<=m&&((a=t<2&&m<c[1])?(l=0,p.v=r,p.n=c[1]):m<d&&(a=t<3||c[0]>r||r>d)&&(c[4]=t,c[5]=r,p.n=d,l=0))}if(a||t>1)return o;throw f=!0,r}return function(a,s,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,d),l=s,i=d;(n=l<2?e:i)||!f;){c||(l?l<3?(l>1&&(p.n=-1),m(l,i)):p.n=i:p.v=i);try{if(u=2,c){if(l||(a="next"),n=c[a]){if(!(n=n.call(c,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,l<2&&(l=0)}else 1===l&&(n=c.return)&&n.call(c),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);c=e}else if((n=(f=p.n<0)?i:t.call(r,p))!==o)break}catch(n){c=e,l=1,i=n}finally{u=1}}return{value:n,done:f}}}(t,a,c),!0),u}var o={};function l(){}function i(){}function u(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(g(n={},r,function(){return this}),n),f=u.prototype=l.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,g(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=u,g(f,"constructor",u),g(u,"constructor",i),i.displayName="GeneratorFunction",g(u,a,"GeneratorFunction"),g(f),g(f,a,"Generator"),g(f,r,function(){return this}),g(f,"toString",function(){return"[object Generator]"}),(A=function(){return{w:c,m:p}})()}function g(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}g=function(e,n,t,r){function c(n,t){g(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(c("next",0),c("throw",1),c("return",2))},g(e,n,t,r)}function R(e,n,t,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void t(e)}l.done?n(i):Promise.resolve(i).then(r,a)}function k(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var c=e.apply(n,t);function o(e){R(c,r,a,o,l,"next",e)}function l(e){R(c,r,a,o,l,"throw",e)}o(void 0)})}}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,c,o,l=[],i=!0,u=!1;try{if(c=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=c.call(t)).done)&&(l.push(r.value),l.length!==n);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return j(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var S=(0,y.A)(function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,"& span":{marginLeft:5,fontSize:12,color:e.palette.text.alt,"&::before":{content:'"("'},"&::after":{content:'")"'}}},track:{background:e.palette.secondary.dark},youindic:{color:"gold"},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"}}});const _=function(e){var n=S(),t=(0,E.MW)(),y=(0,a.wA)(),g=(0,a.d4)(function(e){return e.data.data.player.ID}),R=(0,a.d4)(function(e){var n;return null===(n=e.data.data.player.Alias)||void 0===n?void 0:n.redline}),j=(0,a.d4)(function(e){return e.race.inRace}),_=(0,a.d4)(function(e){return e.data.data.tracks}),C=(0,a.d4)(function(e){return e.race.races}).filter(function(e){return-1!=e.state&&2!=e.state&&Boolean(_.filter(function(n){return n._id==e.track})[0])}).sort(function(e,n){return n.time-e.time}),O=w((0,r.useState)(null),2),x=O[0],N=O[1],T=w((0,r.useState)(null),2),U=T[0],z=T[1],I=function(){var e=k(A().m(function e(n){var r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.A.send("JoinRace",n);case 1:return e.n=2,e.v.json();case 2:r=e.v,t(r?"Joined Race":"Unable to Join Race"),r&&y({type:"I_RACE",payload:{state:!0}}),e.n=4;break;case 3:e.p=3,a=e.v,console.log(a),t("Unable to Join Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=k(A().m(function e(n){var r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.A.send("LeaveRace",n);case 1:return e.n=2,e.v.json();case 2:r=e.v,t(r?"Left Race":"Unable to Leave Race"),r&&y({type:"I_RACE",payload:{state:!1}}),e.n=4;break;case 3:e.p=3,a=e.v,console.log(a),t("Unable to Leave Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=k(A().m(function e(n){var r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.A.send("CancelRace",n);case 1:return e.n=2,e.v.json();case 2:r=e.v,t(r?"Cancelled Race":"Unable to Cancel Race"),r&&y({type:"I_RACE",payload:{state:!1}}),e.n=4;break;case 3:e.p=3,a=e.v,console.log(a),t("Unable to Cancel Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=k(A().m(function e(n){var r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.A.send("StartRace",n);case 1:return e.n=2,e.v.json();case 2:r=e.v,t(null!=r&&r.failed?r.message:"Starting Race"),e.n=4;break;case 3:e.p=3,a=e.v,console.log(a),t("Unable to Start Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=k(A().m(function e(n){var r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h.A.send("EndRace",n);case 1:return e.n=2,e.v.json();case 2:r=e.v,t(r?"Race Ended":"Unable to End Race"),e.n=4;break;case 3:e.p=3,a=e.v,console.log(a),t("Unable to End Race");case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}();return r.createElement("div",{className:n.wrapper},r.createElement("div",null,C.length>0?C.map(function(e,t){var a=_.filter(function(n){return n._id==e.track})[0];return r.createElement(c.A,{key:"race-".concat(t),className:n.track,expanded:U===t,onChange:U===t?function(){return z(null)}:function(){return z(t)}},r.createElement(o.A,{expandIcon:r.createElement(v.g,{icon:["fas","chevron-down"]})},r.createElement(l.A,{className:n.heading},e.name,null!=e.racers[R]&&r.createElement("span",{className:n.youindic},"*")),r.createElement(l.A,{className:n.secondaryHeading},a.Name,r.createElement("span",null,0==e.state?"Setup":"In-Progress"))),r.createElement(i.A,null,r.createElement(u.A,null,r.createElement(s.Ay,null,r.createElement(f.A,{primary:"Name",secondary:e.name})),r.createElement(s.Ay,null,r.createElement(f.A,{primary:"Host",secondary:"".concat(e.host," (").concat(e.host_src,")")})),r.createElement(s.Ay,null,r.createElement(f.A,{primary:"Track",secondary:"".concat(a.Name," (").concat(a.Distance,")")})),r.createElement(s.Ay,null,r.createElement(f.A,{primary:"# of Laps",secondary:e.laps})),r.createElement(s.Ay,null,r.createElement(f.A,{primary:"Joined Racers",secondary:Object.keys(e.racers).length>0?"".concat(Object.keys(e.racers).length," Racers"):null})),r.createElement(s.Ay,null,r.createElement(u.A,null,Object.keys(e.racers).length>0?r.createElement(s.Ay,null,r.createElement(p.A,{variant:"contained",color:"primary",onClick:function(){return N(e)}},"View Racers")):r.createElement(s.Ay,null,r.createElement(f.A,{primary:"No Racers Have Joined"})))))),r.createElement(m.A,null),r.createElement(d.A,null,e.host_id==g?0==e.state?r.createElement(r.Fragment,null,r.createElement(p.A,{size:"small",color:"primary",onClick:function(){return P(e._id)}},"Cancel Race"),r.createElement(p.A,{size:"small",color:"primary",onClick:function(){return L(e._id)}},"Start Race")):r.createElement(p.A,{size:"small",color:"primary",onClick:function(){return F(e._id)}},"End Race"):r.createElement(r.Fragment,null,null!=e.racers[R]?r.createElement(p.A,{size:"small",disabled:e.host_id==g,onClick:function(){return J(e._id)}},"Leave Race"):r.createElement(p.A,{size:"small",disabled:j||0!=e.state,onClick:function(){return I(e._id)}},"Join Race"))))}):r.createElement("div",{className:n.emptyMsg},"No Pending Races"),r.createElement(b.aF,{open:null!=x,title:"Joined Racers",onClose:function(){return N(null)}},null!=x&&r.createElement(u.A,null,Object.keys(x.racers).map(function(e){return r.createElement(s.Ay,null,r.createElement(f.A,{primary:e}))})))))}}}]);