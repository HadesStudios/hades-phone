"use strict";(self.webpackChunkhades_phone=self.webpackChunkhades_phone||[]).push([[1609],{61609:(t,e,n)=>{n.r(e),n.d(e,{default:()=>T});var r=n(60897),o=n(29412),i=n(60454),c=n(127),a=n(19192),l=n(4162),u=n(64294),s=n(90418),f=n(53894),m=n(20121),d=n.n(m),p=n(51734),v=n(59950),b=n(83271);function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof a?r:a,u=Object.create(l.prototype);return g(u,"_invoke",function(n,r,o){var i,a,l,u=0,s=o||[],f=!1,m={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,l=t,m.n=n,c}};function d(n,r){for(a=n,l=r,e=0;!f&&u&&!o&&e<s.length;e++){var o,i=s[e],d=m.p,p=i[2];n>3?(o=p===r)&&(l=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,m.v=r,m.n=i[1]):d<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,m.n=p,a=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,p),a=s,l=p;(e=a<2?t:l)||!f;){i||(a?a<3?(a>1&&(m.n=-1),d(a,l)):m.n=l:m.v=l);try{if(u=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=m.n<0)?l:n.call(r,m))!==c)break}catch(e){i=t,a=1,l=e}finally{u=1}}return{value:e,done:f}}}(n,o,i),!0),u}var c={};function a(){}function l(){}function u(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(g(e={},r,function(){return this}),e),f=u.prototype=a.prototype=Object.create(s);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,g(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=u,g(f,"constructor",u),g(u,"constructor",l),l.displayName="GeneratorFunction",g(u,o,"GeneratorFunction"),g(f),g(f,o,"Generator"),g(f,r,function(){return this}),g(f,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m}})()}function g(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}g=function(t,e,n,r){function i(e,n){g(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},g(t,e,n,r)}function y(t,e,n,r,o,i,c){try{var a=t[i](c),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(r,o)}function A(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function c(t){y(i,r,o,c,a,"next",t)}function a(t){y(i,r,o,c,a,"throw",t)}c(void 0)})}}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,c,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var B=(0,s.A)(function(t){return{wrapper:{height:"100%",background:t.palette.secondary.main},emptyLogo:{width:"100%",fontSize:170,textAlign:"center",marginTop:"25%",color:"#30518c29"},emptyMsg:{color:t.palette.text.alt,width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold"},listItem:{background:t.palette.secondary.dark,borderRadius:12,marginBottom:15,padding:"15px 20px",width:"99.5%",margin:"0 auto 15px auto"},billCard:{display:"flex",justifyContent:"space-between",alignItems:"center"},billContent:{flex:1},billAmount:{fontSize:24,color:"#10b981",fontWeight:"700",marginBottom:8},billTitle:{fontSize:18,color:"#ffffff",fontWeight:"600",marginBottom:8},billInfo:{fontSize:13,color:"#888",marginBottom:4},billDescription:{fontSize:14,color:"#aaa",marginTop:10},billActions:{display:"flex",gap:8},actionButton:{width:40,height:40,borderRadius:8,"&:hover":{opacity:.8}},successText:{color:"#10b981"},errorText:{color:"#ef4444"},editField:{marginBottom:20,width:"100%"}}});const T=(0,o.Ng)()(function(t){var e,n=B(),s=(0,v.MW)(),m=(0,o.d4)(function(t){return t.data.data.bankAccounts}),g=null==m?void 0:m.accounts,y=null==m?void 0:m.pendingBills,E=g&&g.filter(function(t){return"personal"==t.Type})[0],T=w((0,r.useState)(!1),2),k=T[0],N=T[1],x=w((0,r.useState)({bill:0,withAccount:E.Account}),2),S=x[0],j=x[1],I=function(){var e=A(h().m(function e(n){var r,o;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.preventDefault(),t.setLoading("Accepting Bill"),!((r=g&&g.filter(function(t){return t.Account==S.withAccount})[0])&&r.Balance>=(null==S?void 0:S.billData.Amount))){e.n=6;break}return e.p=1,e.n=2,p.A.send("Banking:AcceptBill",{bill:S.billId,account:S.withAccount});case 2:return e.n=3,e.v.json();case 3:o=e.v,s(o?"Bill Has Been Paid":"Error Paying Bill"),setTimeout(function(){return t.refreshAccounts()},750),e.n=5;break;case 4:e.p=4,e.v,s("Error Paying Bill"),t.setLoading(!1);case 5:N(!1),j({bill:0,withAccount:E.Account}),e.n=7;break;case 6:s("Insufficient Funds to Pay Bill"),t.setLoading(!1);case 7:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=A(h().m(function e(n){return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.setLoading("Dismissing Bill"),e.p=1,e.n=2,p.A.send("Banking:DismissBill",{bill:n.Id});case 2:return e.n=3,e.v.json();case 3:e.v?(s("Bill Has Been Dismissed"),setTimeout(function(){t.refreshAccounts()},750)):(s("Error Dismissing Bill"),t.setLoading(!1)),e.n=5;break;case 4:e.p=4,e.v,s("Error Dismissing Bill"),t.setLoading(!1);case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}();return y.length>0?r.createElement("div",{className:n.wrapper},r.createElement("div",null,y.sort(function(t,e){return e.Timestamp-t.Timestamp}).map(function(t){return r.createElement("div",{key:t.Id,className:n.listItem},r.createElement("div",{className:n.billCard},r.createElement("div",{className:n.billContent},r.createElement("div",{className:n.billAmount},t.Amount),r.createElement("div",{className:n.billTitle},t.Title),t.Account&&r.createElement("div",{className:n.billInfo},"Account Number: ",t.Account),r.createElement("div",{className:n.billInfo},"Received ",r.createElement(d(),{unix:!0,date:t.Timestamp,fromNow:!0})),t.Description&&r.createElement("div",{className:n.billDescription},t.Description)),r.createElement("div",{className:n.billActions},r.createElement(i.A,{className:"".concat(n.actionButton," ").concat(n.errorText),onClick:function(){return D(t)}},r.createElement(f.g,{icon:["fas","xmark"]})),r.createElement(i.A,{className:"".concat(n.actionButton," ").concat(n.successText),onClick:function(){return function(t){j({billData:t,billId:t.Id,withAccount:E.Account}),N(!0)}(t)}},r.createElement(f.g,{icon:["fas","check"]})))))})),r.createElement(b.aF,{form:!0,open:k,title:"Accept Bill of $".concat(null===(e=S.billData)||void 0===e?void 0:e.Amount),submitLang:"Accept Bill",onAccept:I,onClose:function(){return N(!1)}},r.createElement(c.A,{className:n.editField},r.createElement(a.A,{id:"withAccount",name:"withAccount",value:S.withAccount},g.map(function(t){var e,n;return r.createElement(l.A,{key:t.Account,value:t.Account,disabled:!(null!==(e=t.Permissions)&&void 0!==e&&e.WITHDRAW)},"".concat((n=t,"personal"===n.Type?"Personal Account":n.Name)," - ").concat(t.Account))})),r.createElement(u.A,null,"Select the account that you wish to pay with.")))):r.createElement("div",{className:n.wrapper},r.createElement("div",{className:n.emptyLogo},r.createElement(f.g,{icon:["fas","tree-palm"]})),r.createElement("div",{className:n.emptyMsg},"No Pending Bills"))})}}]);